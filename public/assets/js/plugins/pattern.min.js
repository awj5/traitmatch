/*

Pattern v2.3
A JavaScript router utilising the HTML5 history API. Compatible with modern browsers only (ES6+).

https://github.com/awj5/pattern

By Adam Johnson
MIT License 2019

Usage:

let patrn = new Pattern();
patrn.init();

history.pushState(null, null, 'about'); // Change URL with pushState

*/
"use strict";class Pattern{constructor(t){this.path=t,this.storedParams=[]}init(){const t=history.pushState,a=this;history.pushState=function(){t.apply(history,arguments),a.urlHandler()},window.addEventListener("popstate",()=>{a.urlHandler()}),a.urlHandler()}urlHandler(){var t=location.pathname.replace(this.path,"");-1!==(t=t.replace("/","")).indexOf("?")&&(t=t.substr(0,t.indexOf("?"))),window.pattern=t||"home";var a=location.search.split("?").pop();a=new URLSearchParams(a);for(let t=0;t<this.storedParams.length;t++){var e=this.storedParams[t];a.has(e)||(window[e]="")}this.storedParams=[];for(let t of a.entries()){let a=t[0];window[a]=t[1],this.storedParams.push(a)}const r=window[window.pattern];"function"==typeof r&&r(),"function"==typeof patternChange&&patternChange()}}